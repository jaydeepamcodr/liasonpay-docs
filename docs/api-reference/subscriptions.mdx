---
sidebar_position: 1
---

import ApiTester from "@site/src/components/ApiTester";

# Subscription Endpoints

This page documents the available subscription-related endpoints in our API.

## Get a list of subscriptions

<span className="badge badge--primary">requires authentication</span>

```http
GET /api/v1/subscription/get
```

Retrieve a list of subscriptions for a store.

### Parameters

| Name            | Type   | Required | Description                                                                                                                                  |
| --------------- | ------ | -------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| store_id        | string | Yes      | The ID of the store. The `store_id` of an existing record in the stores table. Must not be greater than 255 characters.                      |
| subscription_id | string | No       | The ID of the subscription. The `subscription_id` of an existing record in the subscriptions table. Must not be greater than 255 characters. |

### Example Request

```bash
curl --request GET \
    --get "https://liasonpay.net/api/v1/subscription/get?store_id=STORE_65C0279F05&subscription_id=SUBSCRIPTION_56FBC7EEE4" \
    --header "Authorization: Bearer {API_KEY}" \
    --header "Content-Type: application/json" \
    --header "Accept: application/json"
```

### Example Response

```json
{
  "status": true,
  "message": "Subscriptions retrieved successfully",
  "data": []
}
```

<ApiTester
  endpoint="/api/v1/subscription/get"
  method="GET"
  baseUrl="https://liasonpay.net"
  params={[
    {
      name: "store_id",
      required: true,
      in: "query",
      description: "The ID of the store",
    },
    {
      name: "subscription_id",
      required: false,
      in: "query",
      description: "The ID of the subscription",
    },
  ]}
/>

## Create a subscription

<span className="badge badge--primary">requires authentication</span>

```http
POST /api/v1/subscription/create
```

Create a new subscription.

### Parameters

| Name                  | Type    | Required | Description                                                                                                             |
| --------------------- | ------- | -------- | ----------------------------------------------------------------------------------------------------------------------- |
| store_id              | string  | Yes      | The ID of the store. The `store_id` of an existing record in the stores table. Must not be greater than 255 characters. |
| price_id              | string  | Yes      | The ID of the price. The `price_id` of an existing record in the prices table. Must not be greater than 255 characters. |
| trial_period_days     | integer | No       | The number of days for the trial period. Note: Flutterwave does not support trials. Must be at least 0.                 |
| customer              | object  | No       | The customer details.                                                                                                   |
| customer.name         | string  | No       | The name of the customer. Must not be greater than 255 characters.                                                      |
| customer.email        | string  | No       | The email of the customer. Must be a valid email address. Must not be greater than 255 characters.                      |
| customer.phone_number | string  | No       | The phone number of the customer. Must not be greater than 255 characters.                                              |
| metadata              | object  | No       | The metadata of the payment.                                                                                            |
| metadata.order_id     | string  | No       | The order ID.                                                                                                           |
| metadata.order_code   | string  | No       | The order code.                                                                                                         |
| success_url           | string  | Yes      | The URL to redirect to after successful payment. Must be a valid URL.                                                   |
| cancel_url            | string  | Yes      | The URL to redirect to after payment cancellation. Must be a valid URL.                                                 |
| return_url            | string  | No       | The URL to redirect to after payment completion. Must be a valid URL.                                                   |
| mode                  | string  | Yes      | The mode of the payment. Must be one of: `sandbox`, `production`.                                                       |

### Example Request

```bash
curl --request POST \
    "https://liasonpay.net/api/v1/subscription/create" \
    --header "Authorization: Bearer {API_KEY}" \
    --header "Content-Type: application/json" \
    --header "Accept: application/json" \
    --data "{
    \"store_id\": \"STORE_123\",
    \"price_id\": \"PRICE_ABC123\",
    \"trial_period_days\": 30,
    \"customer\": {
        \"name\": \"John Doe\",
        \"email\": \"john.doe@example.com\",
        \"phone_number\": \"+2348123456789\"
    },
    \"metadata\": {
        \"order_id\": \"1234567890\",
        \"order_code\": \"ORD_1234567890\"
    },
    \"success_url\": \"https://example.com/success\",
    \"cancel_url\": \"https://example.com/cancel\",
    \"return_url\": \"https://example.com/return\",
    \"mode\": \"sandbox\"
}"
```

### Example Response

```json
{
  "status": true,
  "message": "Payment processed successfully",
  "data": {}
}
```

<ApiTester
  endpoint="/api/v1/subscription/create"
  method="POST"
  baseUrl="https://liasonpay.net"
  params={[
    {
      name: "store_id",
      required: true,
      in: "body",
      description: "The ID of the store",
    },
    {
      name: "price_id",
      required: true,
      in: "body",
      description: "The ID of the price",
    },
    {
      name: "trial_period_days",
      required: false,
      in: "body",
      description: "The number of days for the trial period",
    },
    {
      name: "customer",
      required: false,
      in: "body",
      description: "The customer details (object)",
    },
    {
      name: "metadata",
      required: false,
      in: "body",
      description: "The metadata of the payment (object)",
    },
    {
      name: "success_url",
      required: true,
      in: "body",
      description: "The URL to redirect to after successful payment",
    },
    {
      name: "cancel_url",
      required: true,
      in: "body",
      description: "The URL to redirect to after payment cancellation",
    },
    {
      name: "return_url",
      required: false,
      in: "body",
      description: "The URL to redirect to after payment completion",
    },
    {
      name: "mode",
      required: true,
      in: "body",
      description: "The mode of the payment (sandbox or production)",
    },
  ]}
/>

## Verify a subscription

<span className="badge badge--primary">requires authentication</span>

```http
POST /api/v1/subscription/verify
```

Verify a subscription.

### Parameters

| Name                    | Type   | Required | Description                                                                                                                                     |
| ----------------------- | ------ | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| subscription_request_id | string | Yes      | The ID of the subscription request. The `log_id` of an existing record in the subscription_logs table. Must not be greater than 255 characters. |

### Example Request

```bash
curl --request POST \
    "https://liasonpay.net/api/v1/subscription/verify" \
    --header "Authorization: Bearer {API_KEY}" \
    --header "Content-Type: application/json" \
    --header "Accept: application/json" \
    --data "{
    \"subscription_request_id\": \"552852D7C8\"
}"
```

### Example Response

```json
{
  "status": true,
  "message": "Subscription verified successfully",
  "data": {}
}
```

<ApiTester
  endpoint="/api/v1/subscription/verify"
  method="POST"
  baseUrl="https://liasonpay.net"
  params={[
    {
      name: "subscription_request_id",
      required: true,
      in: "body",
      description: "The ID of the subscription request",
    },
  ]}
/>

## Cancel a subscription

<span className="badge badge--primary">requires authentication</span>

```http
POST /api/v1/subscription/cancel
```

Cancel a subscription.

### Parameters

| Name                 | Type    | Required | Description                                                                                                                                  |
| -------------------- | ------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| subscription_id      | string  | Yes      | The ID of the subscription. The `subscription_id` of an existing record in the subscriptions table. Must not be greater than 255 characters. |
| cancel_at_period_end | boolean | No       | Cancel the subscription at the end of the billing period.                                                                                    |

### Example Request

```bash
curl --request POST \
    "https://liasonpay.net/api/v1/subscription/cancel" \
    --header "Authorization: Bearer {API_KEY}" \
    --header "Content-Type: application/json" \
    --header "Accept: application/json" \
    --data "{
    \"subscription_id\": \"SUBSCRIPTION_879F7492C4\",
    \"cancel_at_period_end\": false
}"
```

### Example Response

```json
{
  "status": true,
  "message": "Subscription cancelled successfully",
  "data": {}
}
```

<ApiTester
  endpoint="/api/v1/subscription/cancel"
  method="POST"
  baseUrl="https://liasonpay.net"
  params={[
    {
      name: "subscription_id",
      required: true,
      in: "body",
      description: "The ID of the subscription",
    },
    {
      name: "cancel_at_period_end",
      required: false,
      in: "body",
      description: "Cancel the subscription at the end of the billing period",
    },
  ]}
/>

## Upgrade a subscription

<span className="badge badge--primary">requires authentication</span>

```http
POST /api/v1/subscription/upgrade
```

Upgrade a subscription.

### Parameters

| Name                | Type   | Required | Description                                                                                                                                             |
| ------------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| subscription_id     | string | Yes      | The ID of the subscription to upgrade. The `subscription_id` of an existing record in the subscriptions table. Must not be greater than 255 characters. |
| store_id            | string | Yes      | The ID of the store. The `store_id` of an existing record in the stores table. Must not be greater than 255 characters.                                 |
| price_id            | string | Yes      | The ID of the price to use for the upgrade. The `price_id` of an existing record in the prices table. Must not be greater than 255 characters.          |
| metadata            | object | No       | The metadata of the payment.                                                                                                                            |
| metadata.order_id   | string | No       | The order ID.                                                                                                                                           |
| metadata.order_code | string | No       | The order code.                                                                                                                                         |
| mode                | string | Yes      | The mode of the payment. Must be one of: `sandbox`, `production`.                                                                                       |

### Example Request

```bash
curl --request POST \
    "https://liasonpay.net/api/v1/subscription/upgrade" \
    --header "Authorization: Bearer {API_KEY}" \
    --header "Content-Type: application/json" \
    --header "Accept: application/json" \
    --data "{
    \"subscription_id\": \"SUBSCRIPTION_879F7492C4\",
    \"store_id\": \"STORE_123\",
    \"price_id\": \"PRICE_ABC123\",
    \"metadata\": {
        \"order_id\": \"1234567890\",
        \"order_code\": \"ORD_1234567890\"
    },
    \"mode\": \"sandbox\"
}"
```

### Example Response

```json
{
  "status": true,
  "message": "Subscription upgrade initiated successfully",
  "data": {}
}
```

<ApiTester
  endpoint="/api/v1/subscription/upgrade"
  method="POST"
  baseUrl="https://liasonpay.net"
  params={[
    {
      name: "subscription_id",
      required: true,
      in: "body",
      description: "The ID of the subscription to upgrade",
    },
    {
      name: "store_id",
      required: true,
      in: "body",
      description: "The ID of the store",
    },
    {
      name: "price_id",
      required: true,
      in: "body",
      description: "The ID of the price to use for the upgrade",
    },
    {
      name: "metadata",
      required: false,
      in: "body",
      description: "The metadata of the payment (object)",
    },
    {
      name: "mode",
      required: true,
      in: "body",
      description: "The mode of the payment (sandbox or production)",
    },
  ]}
/>
