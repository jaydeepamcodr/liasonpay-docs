---
sidebar_position: 4
---

import {
  ApiBaseUrl,
  AppUrl,
  ExampleApiKey,
  ExampleStoreId,
} from "@site/src/components/DynamicValues";
import { getDocsUrl } from "@site/src/components/DocsUrl";
import CodeBlock, { CodeTabs } from "@site/src/components/CodeBlock";
import * as CodeExamples from "@site/src/components/CodeExamples";

# How to Use the API

<div className="explorer-header">
  <div className="explorer-header-content">
    <h2>Getting Started with the LiasonPay API</h2>
    <p>
      Learn how to make API requests, handle responses, and implement common
      workflows
    </p>
    <div className="explorer-buttons">
      <a
        href={getDocsUrl("api-reference")}
        className="button button--primary button--lg"
      >
        <span>üìö API Reference</span>
      </a>
      <a
        href={getDocsUrl("interactive-tools/api-explorer")}
        className="button button--secondary button--lg"
      >
        <span>üîç API Explorer</span>
      </a>
    </div>
  </div>
</div>

## API Basics

<div className="features-grid">
  <div className="feature-card">
    <h3>üåê Base URL</h3>
    <p>All API requests should be made to the appropriate base URL:</p>
    <ul>
      <li><strong>Production:</strong> <code>{ApiBaseUrl()}</code></li>
    </ul>
    <div className="info-callout">
      <p><strong>üí° Note:</strong> Always use HTTPS for all API requests to ensure secure communication.</p>
    </div>
  </div>

  <div className="feature-card">
    <h3>üîÑ Request Format</h3>
    <p>LiasonPay API uses RESTful conventions:</p>
    <ul>
      <li><strong>GET:</strong> Retrieve resources</li>
      <li><strong>POST:</strong> Create resources or perform actions</li>
      <li><strong>PUT/PATCH:</strong> Update resources</li>
      <li><strong>DELETE:</strong> Remove resources</li>
    </ul>
  </div>
</div>

## Required Headers

<div className="code-example-section">
  <h3>Standard API Headers</h3>
  <p>Include these headers with all API requests:</p>

  <CodeBlock
    language="http"
    title="HTTP Headers"
  >
{CodeExamples.AUTH_HEADER}
  </CodeBlock>
</div>

## Response Format

<div className="examples-container">
  <div className="example-card">
    <h3>‚úÖ Success Response</h3>
    <p>All API responses are returned in JSON format with the following structure:</p>

    <CodeBlock
      language="json"
      title="Success Response"
      badge="good"
    >

{CodeExamples.SUCCESS_RESPONSE}

</CodeBlock>

    <div className="response-fields">
      <div className="response-field">
        <span className="field-name">status</span>
        <span className="field-description">A boolean indicating whether the request was successful</span>
      </div>
      <div className="response-field">
        <span className="field-name">message</span>
        <span className="field-description">A string providing information about the result of the request</span>
      </div>
      <div className="response-field">
        <span className="field-name">data</span>
        <span className="field-description">An object or array containing the response data</span>
      </div>
    </div>

  </div>

  <div className="example-card">
    <h3>‚ùå Error Response</h3>
    <p>When an error occurs, the API will return a JSON response with a <code>status</code> of <code>false</code> and an error message:</p>

    <CodeBlock
      language="json"
      title="Error Response"
      badge="bad"
    >

{CodeExamples.ERROR_RESPONSE}

</CodeBlock>

    <div className="response-fields">
      <div className="response-field">
        <span className="field-name">status</span>
        <span className="field-description">Always <code>false</code> for error responses</span>
      </div>
      <div className="response-field">
        <span className="field-name">message</span>
        <span className="field-description">A human-readable error message</span>
      </div>
      <div className="response-field">
        <span className="field-name">data.error_code</span>
        <span className="field-description">A machine-readable error code</span>
      </div>
      <div className="response-field">
        <span className="field-name">data.errors</span>
        <span className="field-description">Detailed validation errors (if applicable)</span>
      </div>
    </div>

  </div>
</div>

## Implementation Guide

<div className="setup-steps">
  <div className="setup-step">
    <div className="step-number">1</div>
    <div className="step-content">
      <h3>Set Up Your Environment</h3>
      <ul>
        <li>Configure your API client with the correct base URL</li>
        <li>Set up authentication with your API key</li>
        <li>Prepare error handling and logging</li>
      </ul>

      <CodeBlock
        language="javascript"
        title="API Client Setup"
        showLineNumbers={true}
      >

{CodeExamples.API_CLIENT_SETUP}

</CodeBlock>
</div>

  </div>

  <div className="setup-step">
    <div className="step-number">2</div>
    <div className="step-content">
      <h3>Make API Requests</h3>
      <p>Here are examples of common API requests:</p>

      <h4>Example: Process a Payment</h4>
      <CodeBlock
        language="javascript"
        title="Process Payment Request"
        showLineNumbers={true}
      >

{CodeExamples.PROCESS_PAYMENT_REQUEST}

</CodeBlock>

      <h4>Example: Get Subscriptions</h4>
      <CodeBlock
        language="javascript"
        title="Get Subscriptions"
        showLineNumbers={true}
      >

{CodeExamples.GET_SUBSCRIPTIONS}

</CodeBlock>
</div>

  </div>

  <div className="setup-step">
    <div className="step-number">3</div>
    <div className="step-content">
      <h3>Handle Responses</h3>
      <p>Always implement proper error handling:</p>

      <CodeBlock
        language="javascript"
        title="Error Handling"
        showLineNumbers={true}
      >

{CodeExamples.ERROR_HANDLING}

</CodeBlock>

      <div className="info-callout">
        <p><strong>üí° Tip:</strong> Always check both the HTTP status code and the <code>status</code> field in the response body to properly handle errors.</p>
      </div>
    </div>

  </div>

  <div className="setup-step">
    <div className="step-number">4</div>
    <div className="step-content">
      <h3>Implement Webhooks</h3>
      <p>Set up webhook handlers to receive real-time notifications:</p>

      <ol>
        <li>Configure webhook URLs in your LiasonPay dashboard</li>
        <li>Implement endpoint handlers for webhook events</li>
        <li>Verify webhook signatures for security</li>
        <li>Process webhook events asynchronously</li>
      </ol>

      <h4>Example Webhook Handler in Express.js</h4>
      <CodeBlock
        language="javascript"
        title="Webhook Handler"
        showLineNumbers={true}
      >

{CodeExamples.WEBHOOK_HANDLER}

</CodeBlock>

      <div className="warning-callout">
        <p><strong>‚ö†Ô∏è Important:</strong> Always acknowledge webhook receipt immediately with a 200 response, then process the webhook asynchronously to avoid timeouts.</p>
      </div>
    </div>

  </div>
</div>

## Common API Workflows

<div className="workflow-section">
  <div className="workflow-steps">
    <div className="workflow-step">
      <div className="step-number">1</div>
      <div className="step-content">
        <h3>Processing a One-Time Payment</h3>
        <ol>
          <li>Create a payment request using the <a href="/api-reference/payments/process-payment">Process a payment</a> endpoint</li>
          <li>Redirect the customer to the payment URL returned in the response</li>
          <li>After payment completion, the customer will be redirected to your success or cancel URL</li>
          <li>Verify the payment status using the <a href="/api-reference/payments/verify-payment">Verify a payment</a> endpoint</li>
        </ol>
        <CodeBlock
          language="javascript"
          title="Payment Workflow"
          showLineNumbers={true}
        >
{CodeExamples.PAYMENT_WORKFLOW}
        </CodeBlock>
      </div>
    </div>

    <div className="workflow-step">
      <div className="step-number">2</div>
      <div className="step-content">
        <h3>Creating a Subscription</h3>
        <ol>
          <li>Create a subscription using the <a href="/api-reference/subscriptions/create-subscription">Create a subscription</a> endpoint</li>
          <li>Redirect the customer to the subscription URL returned in the response</li>
          <li>After subscription setup, the customer will be redirected to your success or cancel URL</li>
          <li>Verify the subscription status using the <a href="/api-reference/subscriptions/verify-subscription">Verify a subscription</a> endpoint</li>
        </ol>
        <CodeBlock
          language="javascript"
          title="Subscription Workflow"
          showLineNumbers={true}
        >

{CodeExamples.SUBSCRIPTION_WORKFLOW}

</CodeBlock>
</div>
</div>

  </div>
</div>

## Implementation Tips

<div className="features-grid">
  <div className="feature-card">
    <h3>üîÑ Idempotency</h3>
    <p>To prevent duplicate operations, use idempotency keys:</p>
    <CodeBlock
      language="http"
      title="Idempotency Header"
    >
{CodeExamples.IDEMPOTENCY_KEY}
    </CodeBlock>
    <div className="info-callout">
      <p><strong>üí° Tip:</strong> Use a unique UUID for each request to ensure idempotency.</p>
    </div>
  </div>

{" "}

<div className="feature-card">
  <h3>üìÑ Pagination</h3>
  <p>For endpoints that return lists, use pagination parameters:</p>
  <CodeBlock language="text" title="Pagination Parameters">
    {CodeExamples.PAGINATION_PARAMS}
  </CodeBlock>
  <p>This helps manage large result sets and improves performance.</p>
</div>

{" "}

<div className="feature-card">
  <h3>‚ùå Error Handling</h3>
  <p>Best practices for handling errors:</p>
  <ul>
    <li>Implement retry logic with exponential backoff for transient errors</li>
    <li>Log detailed error information for debugging</li>
    <li>Provide user-friendly error messages to your customers</li>
    <li>Handle different error types appropriately</li>
  </ul>
</div>

  <div className="feature-card">
    <h3>üß™ Testing</h3>
    <p>Thoroughly test your integration:</p>
    <ul>
      <li>Test all API flows in the sandbox environment before going live</li>
      <li>Use test cards and amounts to simulate different scenarios</li>
      <li>Test error cases and edge conditions</li>
      <li>Implement automated tests for critical payment flows</li>
    </ul>
  </div>
</div>

## Language-Specific Examples

<div className="examples-container">
  <div className="example-card">
    <h3>üêç Python</h3>
    <CodeBlock
      language="python"
      title="Python Example"
      showLineNumbers={true}
    >
{CodeExamples.PYTHON_EXAMPLE}
    </CodeBlock>
  </div>

  <div className="example-card">
    <h3>üêò PHP</h3>
    <CodeBlock
      language="php"
      title="PHP Example"
      showLineNumbers={true}
    >
{CodeExamples.PHP_EXAMPLE}
    </CodeBlock>
  </div>
</div>

## Frequently Asked Questions

<div className="faq-section">
  <div className="faq-item">
    <h3>How do I handle API rate limits?</h3>
    <p>Implement exponential backoff and retry logic to handle rate limits. When you receive a 429 response, wait for the time specified in the <code>retry-after</code> header before retrying the request.</p>
  </div>

{" "}

<div className="faq-item">
  <h3>What's the best way to debug API issues?</h3>
  <p>
    Log detailed request and response information, including headers and body.
    Use the <code>request_id</code> from error responses when contacting
    support. Test with the API Explorer to isolate issues.
  </p>
</div>

{" "}

<div className="faq-item">
  <h3>How do I handle webhook failures?</h3>
  <p>
    Implement a retry mechanism on your server to handle webhook delivery
    failures. Store failed webhooks in a queue and retry them with exponential
    backoff. Monitor webhook delivery rates and set up alerts for failures.
  </p>
</div>

  <div className="faq-item">
    <h3>Can I use the API in a mobile app?</h3>
    <p>Never use API keys directly in mobile apps as they can be extracted. Instead, create a server-side component that makes API calls on behalf of your mobile app.</p>
  </div>
</div>

## Next Steps

<div className="next-steps-section">
  <div className="next-steps-header">
    <div className="next-steps-header-content">
      <h3>Continue Your Integration Journey</h3>
      <p>Follow these steps to complete your LiasonPay API integration</p>
      <div className="progress-indicator">
        <div className="progress-step completed">
          <div className="progress-step-number">1</div>
          <div className="progress-step-label">Authentication</div>
        </div>
        <div className="progress-connector"></div>
        <div className="progress-step completed">
          <div className="progress-step-number">2</div>
          <div className="progress-step-label">Environment</div>
        </div>
        <div className="progress-connector"></div>
        <div className="progress-step completed">
          <div className="progress-step-number">3</div>
          <div className="progress-step-label">Implementation</div>
        </div>
      </div>
    </div>
  </div>

  <div className="next-steps-grid">
    <div className="next-step-card">
      <div className="next-step-card-header">
        <div className="next-step-icon-wrapper">
          <div className="next-step-icon">üìö</div>
        </div>
        <div className="next-step-number">Next</div>
      </div>
      <div className="next-step-card-content">
        <h4>API Reference</h4>
        <p>Explore detailed documentation for all API endpoints</p>
        <ul className="next-step-benefits">
          <li><span className="benefit-icon">‚úì</span> View all available endpoints</li>
          <li><span className="benefit-icon">‚úì</span> See request and response formats</li>
          <li><span className="benefit-icon">‚úì</span> Understand parameter requirements</li>
        </ul>
        <div className="next-step-action">
          <a href="/api-reference" className="button button--primary">
            <span className="button-text">View API Reference</span>
            <span className="button-icon">‚Üí</span>
          </a>
        </div>
      </div>
    </div>

    <div className="next-step-card">
      <div className="next-step-card-header">
        <div className="next-step-icon-wrapper">
          <div className="next-step-icon">üîî</div>
        </div>
        <div className="next-step-number">Advanced</div>
      </div>
      <div className="next-step-card-content">
        <h4>Set Up Webhooks</h4>
        <p>Learn how to receive real-time notifications about payment events</p>
        <ul className="next-step-benefits">
          <li><span className="benefit-icon">‚úì</span> Get notified about payment events</li>
          <li><span className="benefit-icon">‚úì</span> Automate your payment workflows</li>
          <li><span className="benefit-icon">‚úì</span> Implement event-driven architecture</li>
        </ul>
        <div className="next-step-action">
          <a href="/developer-guide/webhooks" className="button button--primary">
            <span className="button-text">View Webhooks Guide</span>
            <span className="button-icon">‚Üí</span>
          </a>
        </div>
      </div>
    </div>

    <div className="next-step-card">
      <div className="next-step-card-header">
        <div className="next-step-icon-wrapper">
          <div className="next-step-icon">‚ùå</div>
        </div>
        <div className="next-step-number">Advanced</div>
      </div>
      <div className="next-step-card-content">
        <h4>Error Handling</h4>
        <p>Learn how to handle API errors effectively</p>
        <ul className="next-step-benefits">
          <li><span className="benefit-icon">‚úì</span> Understand error codes and messages</li>
          <li><span className="benefit-icon">‚úì</span> Implement proper error handling</li>
          <li><span className="benefit-icon">‚úì</span> Create better user experiences</li>
        </ul>
        <div className="next-step-action">
          <a href="/developer-guide/error-handling" className="button button--primary">
            <span className="button-text">View Error Handling Guide</span>
            <span className="button-icon">‚Üí</span>
          </a>
        </div>
      </div>
    </div>

  </div>

  <div className="help-resources-box">
    <div className="help-icon">üí¨</div>
    <div className="help-content">
      <h4>Need Help?</h4>
      <p>If you have any questions or need assistance with your integration, our support team is here to help.</p>
      <div className="help-actions">
        <a href="https://liasonpay.net/support" target="_blank" rel="noopener noreferrer" className="button button--secondary">
          <span className="button-text">Contact Support</span>
        </a>
        <a href="/developer-guide/faq" className="button button--secondary">
          <span className="button-text">View FAQ</span>
        </a>
      </div>
    </div>
  </div>
</div>
